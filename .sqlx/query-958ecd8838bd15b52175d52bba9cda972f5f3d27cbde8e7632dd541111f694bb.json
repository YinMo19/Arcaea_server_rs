{
  "db_name": "MySQL",
  "query": "UPDATE recent30 r\n                 JOIN chart c ON r.song_id = c.song_id\n                 SET r.rating = GREATEST(\n                     CASE\n                         WHEN r.difficulty = 0 AND c.rating_pst IS NOT NULL AND c.rating_pst > 0 THEN\n                             CASE\n                                 WHEN r.score >= 10000000 THEN c.rating_pst / 10.0 + 2.0\n                                 WHEN r.score >= 9800000 THEN c.rating_pst / 10.0 + 1.0 + (r.score - 9800000) * 5.0 / 1000000.0\n                                 ELSE GREATEST(c.rating_pst / 10.0 + (r.score - 9500000) * 5.0 / 1500000.0, 0.0)\n                             END\n                         WHEN r.difficulty = 1 AND c.rating_prs IS NOT NULL AND c.rating_prs > 0 THEN\n                             CASE\n                                 WHEN r.score >= 10000000 THEN c.rating_prs / 10.0 + 2.0\n                                 WHEN r.score >= 9800000 THEN c.rating_prs / 10.0 + 1.0 + (r.score - 9800000) * 5.0 / 1000000.0\n                                 ELSE GREATEST(c.rating_prs / 10.0 + (r.score - 9500000) * 5.0 / 1500000.0, 0.0)\n                             END\n                         WHEN r.difficulty = 2 AND c.rating_ftr IS NOT NULL AND c.rating_ftr > 0 THEN\n                             CASE\n                                 WHEN r.score >= 10000000 THEN c.rating_ftr / 10.0 + 2.0\n                                 WHEN r.score >= 9800000 THEN c.rating_ftr / 10.0 + 1.0 + (r.score - 9800000) * 5.0 / 1000000.0\n                                 ELSE GREATEST(c.rating_ftr / 10.0 + (r.score - 9500000) * 5.0 / 1500000.0, 0.0)\n                             END\n                         WHEN r.difficulty = 3 AND c.rating_byn IS NOT NULL AND c.rating_byn > 0 THEN\n                             CASE\n                                 WHEN r.score >= 10000000 THEN c.rating_byn / 10.0 + 2.0\n                                 WHEN r.score >= 9800000 THEN c.rating_byn / 10.0 + 1.0 + (r.score - 9800000) * 5.0 / 1000000.0\n                                 ELSE GREATEST(c.rating_byn / 10.0 + (r.score - 9500000) * 5.0 / 1500000.0, 0.0)\n                             END\n                         WHEN r.difficulty = 4 AND c.rating_etr IS NOT NULL AND c.rating_etr > 0 THEN\n                             CASE\n                                 WHEN r.score >= 10000000 THEN c.rating_etr / 10.0 + 2.0\n                                 WHEN r.score >= 9800000 THEN c.rating_etr / 10.0 + 1.0 + (r.score - 9800000) * 5.0 / 1000000.0\n                                 ELSE GREATEST(c.rating_etr / 10.0 + (r.score - 9500000) * 5.0 / 1500000.0, 0.0)\n                             END\n                         ELSE 0.0\n                     END,\n                     0.0\n                 )",
  "describe": {
    "columns": [],
    "parameters": {
      "Right": 0
    },
    "nullable": []
  },
  "hash": "958ecd8838bd15b52175d52bba9cda972f5f3d27cbde8e7632dd541111f694bb"
}
